<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple CRUD</title>
</head>
<body>
    <form>
        <label for="new-data">Data:</label><br>
        <input type="text" id="new-data" name="fname"><br>
        <button id="new-item">New Item</button><br>
    </form>
    <form>
        <label for="update-id">Id:</label><br>
        <input type="text" id="update-id" name="fname"><br>
        <label for="update-data">Updated Data:</label><br>
        <input type="text" id="update-data" name="fname"><br>
        <button id="update-item">Update Item</button><br>
    </form>
    <form>
        <label for="delete-id">Id:</label><br>
        <input type="text" id="delete-id" name="fname"><br>
        <button id="delete-item">Delete Item</button><br>
    </form>
    <form>
        <label for="id">Id:</label><br>
        <input type="text" id="find-id" name="fname"><br>
        <button id="find-item">Find Item</button><br>
    </form>

  <button id="get-items">Find All Items</button><br>

  <p id="items"></p>

  <script>
      // Get DOM elements
      const new_item_button = document.getElementById("new-item")
      const new_item_data = document.getElementById("new-data")

      const update_item_button = document.getElementById("update-item")
      const update_item_data = document.getElementById("update-data")
      const update_item_id = document.getElementById("update-id")

      const delete_item_button = document.getElementById("delete-item")
      const delete_item_id = document.getElementById("delete-id")

      const find_item_button = document.getElementById("find-item")
      const find_item_id = document.getElementById("find-id")

      const find_all_items = document.getElementById("get-items")
      const items = document.getElementById("items")

      const url = 'http://localhost:8080/items'

      find_all_items.onclick = (event) => {
          fetch(url, {
              method: 'GET',
          })
          .then(resp => resp.json())
          .then(function(json) {
            items.innerHTML = "All Items: " + JSON.stringify(json)
          })
          .catch(error => console.error(error))
      }

      find_item_button.onclick = (event) => {
          fetch(url, {
            method: 'GET',
            body: JSON.stringify({'id': find_item_id.innerText})
          })
          .then(resp => resp.json())
          .then(function(json) {
            items.innerHTML = "Item by Id: " + JSON.stringify(json)
          })
          .catch(error => console.error(error))
      }

  </script>
    
</body>

</html>
